{"ast":null,"code":"var _jsxFileName = \"/Users/genevieve/Development/mod_5/skincare-tracker/frontend/src/containers/Main.js\";\nimport React, { Component } from \"react\";\nimport { Route } from \"react-router-dom\";\nimport Home from '../components/Home';\nimport ProductTable from \"../components/ProductTable\";\nimport ProductProfile from \"../components/ProductProfile\";\nimport AddToShelf from \"../components/AddToShelf\";\nimport AddEditProduct from \"../components/AddEditProduct\";\nimport IngredientsTable from \"../components/IngredientsTable\";\nimport IngredientProfile from \"./IngredientProfile\";\nexport default class Main extends Component {\n  constructor() {\n    super();\n\n    this.getProductIds = data => {\n      let userProductObjects = data[1];\n      let allIngredients = data[2];\n      let allProducts = data[3];\n      let productIds = data[0].user_products.map(product => product.product_id);\n      this.getUserProducts(productIds, userProductObjects, allIngredients, allProducts);\n    };\n\n    this.getUserProducts = (ids, objects, allIngredients, allProducts) => {\n      let userProducts = [];\n      ids.map(userProductId => {\n        return userProducts = [...userProducts, objects.find(userProduct => userProduct.product.id === userProductId)];\n      });\n      this.getUserIngredients(ids, userProducts, allIngredients, allProducts);\n    };\n\n    this.getUserIngredients = (ids, userProducts, allIngredients, allProducts) => {\n      let rawIngredients = [];\n      ids.map(userProductId => {\n        return rawIngredients = [...rawIngredients, allIngredients.filter(ingredient => ingredient.product.id === userProductId)];\n      });\n      rawIngredients = rawIngredients.flat();\n      let userIngredients = [];\n      let userIngIds = [];\n      rawIngredients.map(rawIngredient => {\n        if (userIngIds.includes(rawIngredient.ingredient.id)) {} else {\n          userIngIds = [...userIngIds, rawIngredient.ingredient.id];\n          userIngredients = [...userIngredients, rawIngredient];\n        }\n\n        return userIngredients;\n      });\n      this.setNewState(userProducts, userIngredients, allProducts);\n    };\n\n    this.setNewState = (userProducts, ingredients, allProducts) => {\n      this.setState({\n        usersProducts: userProducts,\n        usersIngredients: ingredients,\n        allProducts: allProducts\n      });\n    };\n\n    this.state = {\n      allProducts: [],\n      usersProducts: [],\n      usersIngredients: [],\n      currentIngredient: {}\n    };\n  }\n\n  componentDidMount() {\n    const user_id = 13;\n    const urls = [\"http://localhost:3000/users/\".concat(user_id), \"http://localhost:3000/user_products\", \"http://localhost:3000/product_ingredients\", \"http://localhost:3000/products\"];\n    Promise.all(urls.map(url => fetch(url).then(resp => resp.json()).catch(error => console.log(\"There was a problem!\", error)))).then(data => this.getProductIds(data));\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: () => React.createElement(Home, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/products\",\n      render: props => React.createElement(ProductTable, Object.assign({}, props, {\n        products: this.state.usersProducts,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/products/:id\",\n      render: props => React.createElement(ProductProfile, Object.assign({}, props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/addtoshelf\",\n      render: props => React.createElement(AddToShelf, Object.assign({}, props, {\n        products: this.state.allProducts,\n        usersProducts: this.state.usersProducts,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/addtoshelf/:product_id\",\n      render: props => React.createElement(AddEditProduct, Object.assign({}, props, {\n        products: this.state.allProducts,\n        usersProducts: this.state.usersProducts,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/ingredients\",\n      render: props => React.createElement(IngredientsTable, Object.assign({}, props, {\n        ingredients: this.state.usersIngredients,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/ingredients/:id\",\n      render: () => React.createElement(IngredientProfile // {...props}\n      //   onSetCurrentIngredient={this.setCurrentIngredient}\n      //   ingredient={this.state.currentIngredient}\n      , {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/genevieve/Development/mod_5/skincare-tracker/frontend/src/containers/Main.js"],"names":["React","Component","Route","Home","ProductTable","ProductProfile","AddToShelf","AddEditProduct","IngredientsTable","IngredientProfile","Main","constructor","getProductIds","data","userProductObjects","allIngredients","allProducts","productIds","user_products","map","product","product_id","getUserProducts","ids","objects","userProducts","userProductId","find","userProduct","id","getUserIngredients","rawIngredients","filter","ingredient","flat","userIngredients","userIngIds","rawIngredient","includes","setNewState","ingredients","setState","usersProducts","usersIngredients","state","currentIngredient","componentDidMount","user_id","urls","Promise","all","url","fetch","then","resp","json","catch","error","console","log","render","props"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Route } from \"react-router-dom\";\nimport Home from '../components/Home';\nimport ProductTable from \"../components/ProductTable\";\nimport ProductProfile from \"../components/ProductProfile\";\nimport AddToShelf from \"../components/AddToShelf\";\nimport AddEditProduct from \"../components/AddEditProduct\";\nimport IngredientsTable from \"../components/IngredientsTable\";\nimport IngredientProfile from \"./IngredientProfile\";\n\nexport default class Main extends Component {\n  constructor() {\n    super();\n    this.state = {\n      allProducts: [],\n      usersProducts: [],\n      usersIngredients: [],\n      currentIngredient: {}\n    };\n  }\n\n  componentDidMount() {\n    const user_id = 13;\n    const urls = [\n      `http://localhost:3000/users/${user_id}`,\n      \"http://localhost:3000/user_products\",\n      \"http://localhost:3000/product_ingredients\",\n      \"http://localhost:3000/products\"\n    ];\n\n    Promise.all(\n      urls.map(url =>\n        fetch(url)\n          .then(resp => resp.json())\n          .catch(error => console.log(\"There was a problem!\", error))\n      )\n    ).then(data => this.getProductIds(data));\n  }\n\n  getProductIds = data => {\n    let userProductObjects = data[1];\n    let allIngredients = data[2];\n    let allProducts = data[3];\n    let productIds = data[0].user_products.map(product => product.product_id);\n\n    this.getUserProducts(productIds, userProductObjects, allIngredients, allProducts);\n  };\n\n  getUserProducts = (ids, objects, allIngredients, allProducts) => {\n    let userProducts = [];\n    ids.map(userProductId => {\n      return (userProducts = [\n        ...userProducts,\n        objects.find(userProduct => userProduct.product.id === userProductId)\n      ]);\n    });\n    this.getUserIngredients(ids, userProducts, allIngredients, allProducts);\n  };\n\n  getUserIngredients = (ids, userProducts, allIngredients, allProducts) => {\n    let rawIngredients = [];\n    ids.map(userProductId => {\n      return (rawIngredients = [\n        ...rawIngredients,\n        allIngredients.filter(\n          ingredient => ingredient.product.id === userProductId\n        )\n      ]);\n    });\n\n    rawIngredients = rawIngredients.flat();\n    let userIngredients = [];\n    let userIngIds = [];\n\n    rawIngredients.map(rawIngredient => {\n      if (userIngIds.includes(rawIngredient.ingredient.id)) {\n      } else {\n        userIngIds = [...userIngIds, rawIngredient.ingredient.id];\n        userIngredients = [...userIngredients, rawIngredient];\n      }\n      return userIngredients;\n    });\n\n    this.setNewState(userProducts, userIngredients, allProducts);\n  };\n\n  setNewState = (userProducts, ingredients, allProducts) => {\n    this.setState({\n      usersProducts: userProducts,\n      usersIngredients: ingredients,\n      allProducts: allProducts\n    });\n  };\n\n  render() {\n    return (\n      <div>\n        <Route\n          exact\n          path=\"/\"\n          render={() => (\n            <Home />\n          )}\n        />\n        <Route\n          exact\n          path=\"/products\"\n          render={props => (\n            <ProductTable {...props} products={this.state.usersProducts} />\n          )}\n        />\n        <Route\n          exact\n          path=\"/products/:id\"\n          render={(props) => (\n            <ProductProfile {...props} />\n          )}\n        />\n        <Route\n          exact\n          path=\"/addtoshelf\"\n          render={props => (\n            <AddToShelf {...props} products={this.state.allProducts} usersProducts={this.state.usersProducts}/>\n          )}\n        />\n        <Route\n          exact\n          path=\"/addtoshelf/:product_id\"\n          render={props => (\n            <AddEditProduct {...props} products={this.state.allProducts} usersProducts={this.state.usersProducts}/>\n          )}\n        />\n        <Route\n          exact\n          path=\"/ingredients\"\n          render={props => (\n            <IngredientsTable\n              {...props}\n              ingredients={this.state.usersIngredients}\n            />\n          )}\n        />\n        <Route\n          path=\"/ingredients/:id\"\n          render={() => (\n            <IngredientProfile\n              // {...props}\n            //   onSetCurrentIngredient={this.setCurrentIngredient}\n            //   ingredient={this.state.currentIngredient}\n            />\n          )}\n        />\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}