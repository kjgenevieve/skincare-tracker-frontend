{"ast":null,"code":"var _jsxFileName = \"/Users/genevieve/Development/mod_5/skincare-tracker-frontend/src/containers/Main.js\";\nimport React, { Component } from \"react\";\nimport { Route } from \"react-router-dom\";\nimport Home from '../components/Home';\nimport ProductTable from \"../components/ProductTable\";\nimport ProductProfile from \"../components/ProductProfile\";\nimport AddToShelf from \"../components/AddToShelf\";\nimport AddEditProduct from \"../components/AddEditProduct\";\nimport IngredientsTable from \"../components/IngredientsTable\";\nimport IngredientProfile from \"./IngredientProfile\";\nexport default class Main extends Component {\n  constructor() {\n    super();\n\n    this.renderProductTable = () => {\n      if (this.state.usersProductReviews.length === 0) {\n        const user_id = 1;\n        let url = \"http://localhost:3000/user_products/users/\".concat(user_id);\n        fetch(url).then(res => res.json()).then(data => {\n          this.setState({\n            usersProductReviews: data\n          });\n        }).then(() => {\n          return React.createElement(ProductTable, {\n            usersProductReviews: this.state.usersProductReviews,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 35\n            },\n            __self: this\n          });\n        });\n      } else {\n        return React.createElement(ProductTable, {\n          usersProductReviews: this.state.usersProductReviews,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 39\n          },\n          __self: this\n        });\n      }\n    };\n\n    this.renderAddToShelf = () => {\n      if (this.state.usersProductReviews) {\n        if (this.state.usersProductReviews.length === 0) {\n          // I don't have state set.\n          // Get usersProductReviews, set to state, render <AddToShelf /> with props.\n          const user_id = 1;\n          const url = \"http://localhost:3000/user_products/users/\".concat(user_id);\n          fetch(url).then(resp => resp.json()).catch(error => console.log(\"There was a problem!\", error)).then(data => {\n            this.setState({\n              usersProductReviews: data\n            });\n          }).then(() => {\n            return React.createElement(AddToShelf, {\n              usersProductReviews: this.state.usersProductReviews,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 61\n              },\n              __self: this\n            });\n          });\n        } else {\n          // I have access to both state.usersProductReviews && state.allProducts.\n          // Render <AddToShelf /> with props.\n          return React.createElement(AddToShelf, {\n            usersProductReviews: this.state.usersProductReviews,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 68\n            },\n            __self: this\n          });\n        }\n      }\n    };\n\n    this.renderIngredients = () => {\n      let rawIngredients = [];\n      let usersIngredientsIds = [];\n      let usersIngredients = [];\n\n      if (this.state.usersIngredients.length === 0) {\n        const user_id = 1;\n        fetch(\"http://localhost:3000/users/\".concat(user_id)).then(res => res.json()).then(data => {\n          rawIngredients = data.user_ingredients.flat();\n        }).then(() => {\n          rawIngredients.map(ingredient => {\n            if (usersIngredientsIds.includes(ingredient.id)) {} else {\n              usersIngredientsIds.push(ingredient.id);\n              usersIngredients.push(ingredient);\n            }\n          });\n        }).then(() => {\n          this.setState({\n            usersIngredients: usersIngredients\n          });\n        }).then(() => {\n          return React.createElement(IngredientsTable, {\n            ingredients: this.state.usersIngredients,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 102\n            },\n            __self: this\n          });\n        });\n      } else {\n        return React.createElement(IngredientsTable, {\n          ingredients: this.state.usersIngredients,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        });\n      }\n    };\n\n    this.state = {\n      usersProductReviews: [],\n      usersIngredients: [],\n      currentIngredient: {}\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: () => React.createElement(Home, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/products\",\n      render: this.renderProductTable,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/products/:id\",\n      render: props => React.createElement(ProductProfile, Object.assign({}, props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/addtoshelf\",\n      render: this.renderAddToShelf,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/addtoshelf/:product_id\",\n      render: props => React.createElement(AddEditProduct, Object.assign({}, props, {\n        products: this.state.allProducts,\n        usersProducts: this.state.usersProducts,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/ingredients\",\n      render: this.renderIngredients,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/ingredients/:id\",\n      render: () => React.createElement(IngredientProfile, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/genevieve/Development/mod_5/skincare-tracker-frontend/src/containers/Main.js"],"names":["React","Component","Route","Home","ProductTable","ProductProfile","AddToShelf","AddEditProduct","IngredientsTable","IngredientProfile","Main","constructor","renderProductTable","state","usersProductReviews","length","user_id","url","fetch","then","res","json","data","setState","renderAddToShelf","resp","catch","error","console","log","renderIngredients","rawIngredients","usersIngredientsIds","usersIngredients","user_ingredients","flat","map","ingredient","includes","id","push","currentIngredient","render","props","allProducts","usersProducts"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Route } from \"react-router-dom\";\nimport Home from '../components/Home';\nimport ProductTable from \"../components/ProductTable\";\nimport ProductProfile from \"../components/ProductProfile\";\nimport AddToShelf from \"../components/AddToShelf\";\nimport AddEditProduct from \"../components/AddEditProduct\";\nimport IngredientsTable from \"../components/IngredientsTable\";\nimport IngredientProfile from \"./IngredientProfile\";\n\nexport default class Main extends Component {\n  constructor() {\n    super();\n    this.state = {\n      usersProductReviews: [],\n      usersIngredients: [],\n      currentIngredient: {}\n    };\n  }\n\n  renderProductTable = () => {\n    if (this.state.usersProductReviews.length === 0) {\n      const user_id = 1\n      let url = `http://localhost:3000/user_products/users/${user_id}`\n      \n      fetch(url)\n      .then(res => res.json())\n      .then(data => {\n        this.setState({\n          usersProductReviews: data\n        })\n      })\n      .then(() =>\n        {return (\n          <ProductTable usersProductReviews={this.state.usersProductReviews} />\n        )})\n    } else {\n      return (\n        <ProductTable usersProductReviews={this.state.usersProductReviews} />\n      )\n    }\n  }\n\n  renderAddToShelf = () => {\n    if (this.state.usersProductReviews) {\n      if (this.state.usersProductReviews.length === 0) {\n        // I don't have state set.\n        // Get usersProductReviews, set to state, render <AddToShelf /> with props.\n        const user_id = 1;\n        const url = `http://localhost:3000/user_products/users/${user_id}`;\n\n        fetch(url)\n        .then(resp => resp.json())\n        .catch(error => console.log(\"There was a problem!\", error))\n        .then(data => {\n          this.setState({\n            usersProductReviews: data\n          })\n        }).then(() => {\n          return (\n            <AddToShelf usersProductReviews={this.state.usersProductReviews} />\n          )\n        })\n      } else {\n        // I have access to both state.usersProductReviews && state.allProducts.\n        // Render <AddToShelf /> with props.\n        return (\n          <AddToShelf usersProductReviews={this.state.usersProductReviews} />\n        )\n      }\n    }\n  }\n\n  renderIngredients = () => {\n    let rawIngredients = []\n    let usersIngredientsIds = []\n    let usersIngredients = []\n    if (this.state.usersIngredients.length === 0) {\n      const user_id = 1\n      fetch(`http://localhost:3000/users/${user_id}`)\n      .then(res => res.json())\n      .then((data) => {\n        rawIngredients = data.user_ingredients.flat()\n      })\n      .then(() => {\n        rawIngredients.map ((ingredient) => {\n          if (usersIngredientsIds.includes(ingredient.id)) {\n\n          } else {\n            usersIngredientsIds.push(ingredient.id);\n            usersIngredients.push(ingredient)\n          }\n        })\n      })\n      .then(() => {\n        this.setState({\n          usersIngredients: usersIngredients\n        })\n      })\n      .then(() => {\n        return (\n          <IngredientsTable ingredients={this.state.usersIngredients} />\n        )\n      })\n    } else {\n      return (\n        <IngredientsTable ingredients={this.state.usersIngredients} />\n      )\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <Route\n          exact\n          path=\"/\"\n          render={() => (\n            <Home />\n          )}\n        />\n        <Route\n          exact\n          path=\"/products\"\n          render={this.renderProductTable}\n        />\n        <Route\n          exact\n          path=\"/products/:id\"\n          render={(props) => (\n            <ProductProfile {...props} />\n          )}\n        />\n        <Route\n          exact\n          path=\"/addtoshelf\"\n          render={this.renderAddToShelf}\n        />\n        <Route\n          exact\n          path=\"/addtoshelf/:product_id\"\n          render={props => (\n            <AddEditProduct {...props} products={this.state.allProducts} usersProducts={this.state.usersProducts}/>\n          )}\n        />\n        <Route\n          exact\n          path=\"/ingredients\"\n          render={this.renderIngredients}\n        />\n        <Route\n          path=\"/ingredients/:id\"\n          render={() => (\n            <IngredientProfile />\n          )}\n        />\n      </div>\n    );\n  }\n}"]},"metadata":{},"sourceType":"module"}